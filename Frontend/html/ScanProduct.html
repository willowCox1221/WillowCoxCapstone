<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inventra - Scan Product</title>
    <link rel="stylesheet" href="../css/styling.css" />
</head>
<body>
    <header>
        <nav class="navbar">
            <ul class="nav-links">
                <li><a id="nav-home" href="index.html">Home</a></li>
                <li><a id="nav-scan" href="ScanProduct.html">Scan Product</a></li>
                <li><a id="nav-inventory" href="PersonalInventory.html">Inventory</a></li>
                <li><a id="nav-login" href="Login.html">Login</a></li>
                <li><a id="nav-signup" href="SignUp.html">Sign Up</a></li>
            </ul>

            <button class="english">English</button>
            <button class="spanish">Espa√±ol</button>
            <button class="french">Fran√ßais</button>
        </nav>
    </header>

    <main class="scan-container">
        <h2 id="scan-header">Scan a Product</h2>
        <video id="camera" autoplay playsinline width="300" height="200" style="border: 1px solid #ccc;"></video>
        <p id="result">Waiting for scan...</p>
        <button id="startButton">Start Scanning</button>
        <button id="stopButton">Stop Scanning</button>
    </main>

    <script src="https://unpkg.com/@zxing/library@latest"></script>
    <script src="../Javascript/CameraScanner.js"></script>

    <script>
    const API_URL = "http://localhost:5000/preset";

    // üåç Apply translations dynamically
    async function setLanguage(lang) {
        try {
            const response = await fetch(`${API_URL}?lang=${lang}`);
            const t = await response.json();

            // Navbar
            document.getElementById("nav-home").textContent = t.nav_home;
            document.getElementById("nav-scan").textContent = t.nav_scan;
            document.getElementById("nav-inventory").textContent = t.nav_inventory;
            document.getElementById("nav-login").textContent = t.nav_login;
            document.getElementById("nav-signup").textContent = t.nav_signup;

            // Scan Page Text
            document.getElementById("scan-header").textContent = t.scan_header || "Scan a Product";
            document.getElementById("result").textContent = t.scan_waiting || "Waiting for scan...";
            document.getElementById("startButton").textContent = t.scan_start || "Start Scanning";
            document.getElementById("stopButton").textContent = t.scan_stop || "Stop Scanning";
            

            // Save selection
            localStorage.setItem("language", lang);
        } catch (error) {
            console.error("Translation error:", error);
        }
    }

    // üóÇ Restore saved language when loading page
    window.addEventListener("DOMContentLoaded", () => {
        const savedLang = localStorage.getItem("language") || "en";
        setLanguage(savedLang);
    });

    // üåê Language Switch Buttons
    document.querySelector(".english").addEventListener("click", () => setLanguage("en"));
    document.querySelector(".spanish").addEventListener("click", () => setLanguage("es"));
    document.querySelector(".french").addEventListener("click", () => setLanguage("fr"));
    </script>

    <script src="../../inventraTranslationAPI/translation.js"></script>
</body>
</html>